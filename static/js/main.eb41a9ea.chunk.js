(this["webpackJsonpclue-helper"]=this["webpackJsonpclue-helper"]||[]).push([[0],{20:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),r=a(7),c=a.n(r),i=(a(20),a(2)),o=a(3),l=a(4),u=a(6),d=a(5),p=a(8),h=a(13),j=a.n(h),m=(a(30),a(31),a(14)),b=(a(32),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).reportState=e.props.reportState,e.state=e.props.state||{id:0,newPlayerName:"",players:[],play:!1},e.enterGame=function(){e.reportState(e.state),e.props.enterGame()},e.removePlayer=function(t){var a=e.state.players,s=Object(i.a)(Object(i.a)({},e.state),{},{players:a.filter((function(e){return e.id!==t}))});e.setState(s,e.reportState(s))},e.getPlayersList=function(){return Object(s.jsx)("ul",{className:"players-list",children:e.state.players.map((function(t){return Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{children:t.name}),Object(s.jsx)("button",{onClick:function(){e.removePlayer(t.id)},children:"x"})]})}))})},e.submitPlayer=function(){var t=e.state,a=t.id,s=t.newPlayerName,n=t.players,r=Object(i.a)(Object(i.a)({},e.state),{},{players:[].concat(Object(m.a)(n),[{id:a,name:s}]),newPlayerName:"",id:a+1});e.setState(r,e.reportState(r))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.players.length?Object(s.jsx)("div",{className:"play",onClick:function(){return e.enterGame()},children:"Play"}):Object(s.jsx)("div",{className:"play disabled",children:"Play"});return Object(s.jsxs)("div",{className:"Setup offset-md-3 col-md-6 col-xs-12",children:[Object(s.jsxs)("div",{className:"new-player",children:[Object(s.jsx)("input",{className:"player-name",placeholder:"player name",onChange:function(t){var a=Object(i.a)(Object(i.a)({},e.state),{},{newPlayerName:t.target.value});e.setState(a,e.reportState(a))},onKeyPress:function(t){"Enter"===t.key&&e.submitPlayer()},value:this.state.newPlayerName}),Object(s.jsx)("button",{className:"new-player-submit",onClick:function(){return e.submitPlayer()},children:"Save Player"})]}),this.getPlayersList(),t]})}}]),a}(n.Component)),v=(a(33),a(34),["inherit","#ff785f","#ff2a45","#a143be","#ccc"]);var O=function(e){var t=e.label,a=e.playerID,n=e.updateValue,r=e.value;return Object(s.jsx)("td",{className:"color",onClick:function(){n(a,t)},style:{backgroundColor:v[r]}})},f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state=e.props.state,e.reportState=e.props.reportState,e.classicSuspects=["Mr. Green","Prof. Plum","Col. Mustard","Mrs. Peacock","Miss Scarlet","Mrs. White"],e.MDSuspects=e.classicSuspects.concat(["Mme Rose","Sgt. Gray","M. Brunette","Miss Peach"]),e.classicWeapons=["Candlestick","Knife","Lead Pipe","Revolver","Rope","Wrench"],e.MDWeapons=e.classicWeapons.concat(["Poison","Horseshoe"]),e.classicRooms=["Conservatory","Lounge","Kitchen","Library","Hall","Study","Ballroom","Dining Room","Billiard Room"],e.MDRooms=["Courtyard","Gazebo","Drawing Room","Dining Room","Kitchen","Carriage House","Trophy Room","Conservatory","Studio","Billiard Room","Library","Fountain"],e.customSuspects=[],e.customWeapons=[],e.customRooms=[],e.confirmReset=function(){var t=Object(i.a)(Object(i.a)({},e.state),{},{resetting:!0});e.setState(t,e.reportState(t))},e.shareState=function(){var t=e.props.openSnackbar;e.hiddenInput.select(),e.hiddenInput.setSelectionRange(0,99999),document.execCommand("copy"),t("Shareable URL copied!",3e3)},e.newAssetModal=function(t){var a=Object(i.a)(Object(i.a)({},e.state),{},{editingAnAsset:t});e.setState(a,e.reportState(a))},e.removeAssetModal=function(t,a){var s=Object(i.a)(Object(i.a)({},e.state),{},{removeAssetType:t,removeAssetLabel:a});e.setState(s,e.reportState(s))},e.removeAsset=function(){var t=e.state.removeAssetType,a=e.state.removeAssetLabel;e["classic"+t],e["MD"+t],e["custom"+t];["classic","MD","custom"].forEach((function(s){e[s+t]=e[s+t].filter((function(e){return e!==a}))}));var s=Object(i.a)(Object(i.a)({},e.state),{},{removeAssetType:"",removeAssetLabel:""});e.setState(s,e.reportState(s))},e.noteValues=[0,1,2,3,4],e.returnToSetup=function(){e.reportState(e.state),e.props.returnToSetup()},e.updateValue=function(t,a){var s=e.state.tracking,n=Object(i.a)({},s);n[t][a]=((n[t][a]||0)+1)%e.noteValues.length;var r=Object(i.a)(Object(i.a)({},e.state),{},{tracking:n});e.setState(r,e.reportState(r))},e.submitNewAsset=function(){e["custom"+e.state.editingAnAsset]=e["custom"+e.state.editingAnAsset].concat([e.state.newAsset]);var t=Object(i.a)(Object(i.a)({},e.state),{},{editingAnAsset:!1,newAsset:""});e.setState(t,e.reportState(t))},e.toggleVersion=function(){var t="MD"===e.state.version?"classic":"MD",a=Object(i.a)(Object(i.a)({},e.state),{},{version:t});e.setState(a,e.reportState(a))},e}return Object(l.a)(a,[{key:"populateRowsOfType",value:function(e){var t=this,a=this.state,n=a.tracking,r=a.version,c=[],i=[Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"addNew",onClick:function(){t.newAssetModal(e)},children:"+"}),Object(s.jsx)("span",{className:"header",children:e})]})].concat(new Array(this.state.players.length));c.push(Object(s.jsx)("tr",{children:i.map((function(e){return Object(s.jsx)("td",{className:"sectionHeader",children:e})}))}));for(var o=this[r+e].concat(this["custom"+e]),l=function(a){var r=[],i=o[a];r.push(Object(s.jsx)("td",{children:Object(s.jsxs)("div",{className:"assetContainer",children:[Object(s.jsx)("div",{className:"removeAsset",onClick:function(){t.removeAssetModal(e,i)},children:"-"}),Object(s.jsx)("span",{children:i})]})}));for(var l=0;l<t.state.players.length;l++){var u=t.state.players[l].id;r.push(Object(s.jsx)(O,{value:n[u][i]||0,updateValue:t.updateValue,playerID:u,label:i}))}c.push(Object(s.jsx)("tr",{children:r}))},u=0;u<o.length;u++)l(u);return Object(s.jsx)(s.Fragment,{children:c})}},{key:"populateBody",value:function(){var e=this;return Object(s.jsx)(s.Fragment,{children:["Suspects","Weapons","Rooms"].map((function(t){return e.populateRowsOfType(t)}))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.players,n=t.version,r=a.map((function(e){return e.name})),c="MD"===n?"active":"",o=this.state.editingAnAsset||this.state.removeAssetLabel||this.state.resetting?"active":"",l=this.state.editingAnAsset&&this.state.editingAnAsset.substr(0,this.state.editingAnAsset.length-1),u=this.state.editingAnAsset?"active":"",d=this.state.removeAssetLabel?"active":"",p=this.state.resetting?"active":"",h=this.state.removeAssetType&&this.state.removeAssetType.substr(0,this.state.removeAssetType.length-1);return Object(s.jsxs)("div",{className:"Game offset-md-3 col-md-6 col-xs-12",children:[Object(s.jsxs)("div",{className:"top-row",children:[Object(s.jsx)("div",{className:"master-detective ".concat(c),onClick:function(){e.toggleVersion()},children:"MD"}),Object(s.jsx)("div",{className:"return",onClick:function(){e.returnToSetup()},children:"Setup"}),Object(s.jsx)("div",{className:"share-state",onClick:function(){e.shareState()},children:"Share"}),Object(s.jsx)("div",{className:"reset-state",onClick:function(){e.confirmReset()},children:"Reset"})]}),Object(s.jsx)("table",{className:"tracker",children:Object(s.jsxs)("tbody",{children:[Object(s.jsx)("tr",{children:[""].concat(r).map((function(e){return Object(s.jsx)("td",{children:e})}))}),this.populateBody()]})}),Object(s.jsx)("div",{className:"modalBackground ".concat(o),onClick:function(t){if(!e.modalContents.contains(t.target)){var a=Object(i.a)(Object(i.a)({},e.state),{},{editingAnAsset:!1,removeAssetLabel:"",removeAssetType:""});e.setState(a,e.reportState(a))}},children:Object(s.jsxs)("div",{className:"modalContents",ref:function(t){return e.modalContents=t},children:[Object(s.jsxs)("div",{className:"newAsset ".concat(u),children:[Object(s.jsx)("h4",{children:"Add new ".concat(l)}),Object(s.jsxs)("div",{className:"inputContainer",children:[Object(s.jsx)("input",{type:"text",onChange:function(t){var a=Object(i.a)(Object(i.a)({},e.state),{},{newAsset:t.target.value});e.setState(a,e.reportState(a))},value:this.state.newAsset,onKeyPress:function(t){"Enter"===t.key&&e.submitNewAsset()}}),Object(s.jsx)("div",{className:"submit",onClick:this.submitNewAsset,children:"OK"})]})]}),Object(s.jsxs)("div",{className:"removeAsset ".concat(d),children:[Object(s.jsx)("h4",{children:"Remove ".concat(h," ").concat(this.state.removeAssetLabel)}),Object(s.jsxs)("div",{className:"inputContainer",children:[Object(s.jsx)("div",{className:"submit",onClick:this.removeAsset,children:"Yes"}),Object(s.jsx)("div",{className:"submit",onClick:function(){var t=Object(i.a)(Object(i.a)({},e.state),{},{removeAssetLabel:"",removeAssetType:""});e.setState(t,e.reportState(t))},children:"No"})]})]}),Object(s.jsxs)("div",{className:"resetGame ".concat(p),children:[Object(s.jsx)("h4",{children:"Are you sure you want to reset?"}),Object(s.jsxs)("div",{className:"inputContainer",children:[Object(s.jsx)("div",{className:"submit",onClick:this.props.resetState,children:"Yes"}),Object(s.jsx)("div",{className:"submit",onClick:function(){var t=Object(i.a)(Object(i.a)({},e.state),{},{resetting:!1});e.setState(t,e.reportState(t))},children:"No"})]})]})]})}),Object(s.jsx)("input",{className:"hidden",ref:function(t){return e.hiddenInput=t},value:"https://jacobhamblin.github.io/clue-helper?state=".concat(btoa(JSON.stringify(this.props.getAllState())))})]})}}]),a}(n.Component),S=Object(p.b)(f),y="CLUE_STATE",g={game:{version:"classic"},play:!1,setup:void 0},A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state=e.props.state||{game:{version:"classic"},play:!1,setup:void 0},e.checkForURLState=function(){return new URLSearchParams(window.location.search).get("state")},e.loadedSharedURL=function(){var t=e.checkForURLState();if(t)try{var a=JSON.parse(atob(t));return e.setState(a),!0}catch(s){return!1}return!1},e.resetAllState=function(){localStorage.setItem(y,""),e.setState(g)},e.updateSetupState=function(t){e.checkForURLState()&&window.history.replaceState(null,null,window.location.pathname);var a=e.state.game&&e.state.game.tracking||{};t.players.forEach((function(e){a[e.id]=a[e.id]||{}}));var s=Object(i.a)(Object(i.a)({},e.state.game),{},{players:t.players,tracking:a});e.setState({setup:t,game:s},e.updateStorage)},e.updateGameState=function(t){e.checkForURLState()&&window.history.replaceState(null,null,window.location.pathname),e.setState({game:t},e.updateStorage)},e.updateStorage=j()((function(){localStorage.setItem(y,JSON.stringify(e.state))}),500),e.toggleGameState=function(){return e.setState({play:!e.state.play},e.updateStorage)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(!this.loadedSharedURL()){var e=localStorage.getItem(y);if(e){try{e=JSON.parse(e)}catch(a){return}var t=Object.keys(e);t&&t.length&&this.setState(e)}}}},{key:"render",value:function(){var e=this,t=this.state,a=t.game,n=t.play,r=t.setup;return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)("header",{className:"App-header",children:n?Object(s.jsx)(p.a,{children:Object(s.jsx)(S,{state:a,reportState:this.updateGameState,resetState:this.resetAllState,returnToSetup:this.toggleGameState,getAllState:function(){return e.state}})}):Object(s.jsx)(b,{state:r,reportState:this.updateSetupState,enterGame:this.toggleGameState})})})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(s.jsx)(A,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.eb41a9ea.chunk.js.map